<!DOCTYPE html>
<html >
<head>
  <meta charset="UTF-8">
  <title>JavaScript Calculator</title>
<link rel='stylesheet prefetch' href='https://cdnjs.cloudflare.com/ajax/libs/twitter-bootstrap/4.0.0-alpha.6/css/bootstrap.min.css'>
    <script src='https://cdnjs.cloudflare.com/ajax/libs/jquery/3.1.1/jquery.min.js'></script>
    <script src="https://maxcdn.bootstrapcdn.com/bootstrap/3.3.7/js/bootstrap.min.js"></script>
   <link rel="stylesheet" type="text/css" href="mystyle.css">
    
</head>
<body>
    <h1 class="text-center">Javascript calculator</h1>
    <div class='main'>
    <h3 class='text-center'>Calculator 9000</h3>
        <div class='screen'>0
        <p class='smallScreen'>0</p>
        </div>
    <button type="button" class='simple'style="background-color:red" >AC</button>
    <button type="button" class='simple' style="background-color:#FF4500">CE</button>
    <button type="button" class='simple' style="background-color:#778899">/</button>
    <button type="button" class='simple' style="background-color:#778899">x</button>
    <button type="button" class='simple'>7</button>
    <button type="button" class='simple'>8</button>
    <button type="button" class='simple'>9</button>
    <button type="button" class='simple' style="background-color:#778899">-</button>
    <button type="button" class='simple'>4</button>
    <button type="button" class='simple'>5</button>
    <button type="button" class='simple'>6</button>
    <button type="button" class='simple' style="background-color:#778899">+</button>
    <div class='lowbtn'>
        <button type="button" class='simple'>1</button>
    <button type="button" class='simple'>2</button>
    <button type="button" class='simple'>3</button>    
    <button  id ='equal' type="button" class='simple' style="background-color:#778899">=</button>
    <button id='zero' type="button" class='simple'>0</button>
        <button type="button" class='simple'>.</button>    
    </div>
    </div>
    <script >
 
        $( document ).ready(function(){
  var dec=1;
             
function count(ar) {
  if (ar.length === 1) {
    return Math.floor(ar[0]*(Math.pow(10,dec)))/Math.pow(10,dec);
     
      }
   dec = ar[2].length+1;
  switch (ar[1]){
  case '+': 
    ar[2] = Number(ar[0]) + Number(ar[2]);
  break;
  case '-':
    ar[2] = Number(ar[0]) - Number(ar[2]);
   break;
  case "x":
   ar[2] = Number(ar[0]) * Number(ar[2]);
  break;
   case '/':
   ar[2] = Number(ar[0]) / Number(ar[2]);
   
   break;
  }
  ar.shift();
  ar.shift();
  return count(ar);
}
            var ar= [];//array of number and operations
            var str ='';
            var num ='';
            var bool=false; //boolean for number
            var bool2=false; //boolean for operations
            var bool3=false;//boolean for equal
            var bool4=false; //boolean for chain of numbers
            var bool5=false; //boolean for dot 
            var text='';
    $(".simple").on('click',function(){
    switch ($(this).text()){
        case '+':
        case '-':
        case 'x':
        case '/':
            switch (bool2){
                case true:    
      //str += $(this).text();               
     text+=$(this).text();                
        $('.screen').html($(this).text() + '<p>' + text + '<p>');
                    
        //num ='';
          bool=true;
         bool3=false;            
    bool4=false;
    bool5=false;
    bool2=false;
                    
          break;
            }
            
        break;    
    case '=': //counting
            
            switch (bool3){
                case true: 
                    text+=$(this).text();
                    for(var i=0;i<text.length;i++){ //turning string into array

  if(text[i] === '+' || text[i] === '-' || text[i]=== '='|| text[i]=== '/'|| text[i]=== 'x'){
    ar.push(num);
    ar.push(text[i])
    num='';
  }else{
  num+=text[i];
  }
                    }
                    ar.pop();
    str =count(ar);
            text+=str;
                   
             $('.screen').html(str + '<p>' + text +'</p>' );
                
        ar=[];
         bool = true;
        bool2=true;
        bool4=true;            
        bool3=false;
        break;            
            }
            break;
        case '.':
            if(/[.]/.test(str)===false){
             if(bool5){
        str += $(this).text();
        text+=$(this).text();
        $('.screen').html(str + '<p>' + text +'</p>' );            
            bool=false;
                bool4=false;
                bool5=false;
            }
            }
            break;
            case 'CE':
            if(!bool3){
                  str=0;
            //text=0;
                text=text.slice(0,text.length-1);
            bool =true;
            bool2=false;
            $('.screen').html(str + '<p>' + text +'</p>' );
            }
                if(text[text.length-1]==='+'||text[text.length-1]==='-'||text[text.length-1]==='x'||text[text.length-1]==='/'){
                
                //str=str.slice(0,str.length-1);
                text=text.slice(0,text.length-1);
                $('.screen').html('0' + '<p>' + text +'</p>' );
                bool2=true;
            }else if(text.length>1){
                
                if(str.length >1){
                    str=str.slice(0,str.length-1);
                    
                }else{
                    str=0;
                
                }
                text=text.slice(0,text.length-1);
                $('.screen').html(str + '<p>' + text +'</p>' );
                switch (text[text.length-1]){
                    case '+':
                    case '-':
                    case 'x':
                    case '/':
                        bool2=false;
                    break;
                }
                console.log(text);
            }else{
                str=0;
                text=0;
                 $('.screen').html(str + '<p>' + text +'</p>' );
                bool=true;
                bool4=true;
            }        
            break; 
          case 'AC':
            ar=[];
            str=0;
            text=0;
            bool =true;
            bool2=false;
            $('.screen').html(str + '<p>' + text +'</p>' );
            break;
        default:
             switch (bool4){
                case true:
                bool4=false;
                text='';
                break;    
            }
            switch (bool){
                case true:
                bool=false;
                str='';
                break;    
            }
        
        str += $(this).text();
        text+=$(this).text();
      console.log(text);
        bool2=true;
        bool3=true; 
        bool5=true;        
           
    $('.screen').html(str + '<p>' + text +'</p>' );
            if(str.length>10){  //check for digit limit
            
            $('.screen').html('Digit limit met');
            str='';
            text='';    
        }    
    }
        
 
  console.log(ar);      
        
})
    
   
        })
    </script>
</body>
</html>